env : macbook pro14 m2(silicon)
date : 2023-05-04 ~

<Install Flow>
1. brew install conda
2. pip3 install apache-airflow
2-1. python 가상 환경 생성, 3.8 version 생성
conda create --name airflow_env python=3.8 -y

2-2. 가상 환경 활성화
conda activate airflow_env

2-3. 가상 환경 활성화
pip install "apache-airflow==2.2.3" --constraint "https://raw.githubusercontent.com/apache/airflow/constraints-2.2.3/constraints-no-providers-3.8.txt"

2-4. db 활성화 : dag, task info 관리 하기 위해 db 사용
airflow db init

2-4. 디렉토리 이동 및 목록 확인
cd ~/airflow
ls -al

2-5. airflow 계정 생성
# airflow users create --username 0000 --password 0000 --firstname kim --lastname jiyun --role Admin --email wldbs9259@gmail.com
airflow users create --role Admin --username admin --password admin --email admin@example.com --firstname foo --lastname bar

2-6. 웹서버 시작
airflow webserver -D
airflow webserver --port 8080

2-7. 스케줄러 시작
airflow scheduler -D

2-8. Airflow 시작
http://localhost:8080


** 별도 **
- 처음 설치하면 예시 airflow 나오는데 제거 하고 싶을 때
airflow.cfg 에서 load_examplesFalse = False 로 변경 후 웹서버, 스케줄러 재시작
- 웹서버, 스케줄러 재시작 방법
airflow webserver -D
airflow scheduler -D
- mysql 설치
brew install mysql

** 용어 정리 **
- webserver : 웹 UI 제공 역할
- schedule : excutor 에게 task 제공 역할
- excutor : 실행중 task 컨트롤 하는 컴포넌트
- worker : task 실행하는 주체
- database : schedule 정보 저장하고 관리
- Dag : Directed Acyclic Grapth, 단방향 노드